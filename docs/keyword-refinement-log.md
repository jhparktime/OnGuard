# Rule 키워드 정제 로그

## 변경 날짜
2026-02-06

## 변경 목표
MVP 단계에서 오탐(False Positive)을 줄이고, 실제 사기 패턴 탐지율을 높이기 위한 키워드 정제

---

## 1. 일상 대화 표현 완화 (오탐 감소)

### HIGH → MEDIUM으로 완화
**변경 전 (HIGH 0.4f):**
- "급하게", "돈필요", "빌려주세요", "대출"
- "돈빌려", "돈좀", "급하게돈"

**변경 후 (MEDIUM 0.25f):**
- 위 단어들을 MEDIUM으로 이동
- 친구/가족 간 일상 대화에서 자주 등장하는 표현으로 판단

### HIGH에서 완전 제거
**제거된 단어:**
- 없음 (대부분 MEDIUM으로 이동하여 보존)

**효과:**
- 단독 등장 시 점수: 0.4 → 0.25 (37.5% 감소)
- 조합 패턴에서는 여전히 탐지됨

---

## 2. 긴급성 표현 완화 (조합에서만 의미)

### CRITICAL → MEDIUM으로 완화
**변경 전 (CRITICAL 0.6f):**
- "지금당장", "오늘안에", "1시간이내", "30분이내"

**변경 후 (MEDIUM 0.25f):**
- "긴급", "지금당장", "오늘안에", "빨리", "즉시"
- "1시간이내", "30분이내", "시간없어", "마감임박"

**CRITICAL에 유지 (명확한 금전+긴급 조합만):**
- "급하게필요", "긴급송금", "빨리입금", "즉시송금"

**효과:**
- 단독 긴급 표현: 0.6 → 0.25 (58% 감소)
- 금전과 조합 시: 조합 보너스 +0.15로 보상

### 조합 보너스 강화

**기존 조합 로직:**
```kotlin
if ((hasMoney && hasUrgency) || (hasMoney && hasAuth) || (hasAuth && hasUrgency)) {
    totalConfidence += 0.2f
}
```

**새 조합 로직:**
```kotlin
if (hasMoney && hasUrgency) {
    comboBonus += 0.15f  // 금전 + 긴급
}
if (hasMoney && hasAuth) {
    comboBonus += 0.2f   // 금전 + 인증 (더 위험)
}
if (hasAuth && hasUrgency) {
    comboBonus += 0.15f  // 인증 + 긴급
}
if (hasInvestment && hasMoney) {
    comboBonus += 0.1f   // 투자 + 금전
}
```

**효과:**
- 조합 패턴별 차등 보너스 적용
- 투자 사기 패턴 추가 탐지

---

## 3. 사기 패턴 단어 보강

### 축약형/이모티콘 표현 추가 (MEDIUM)
**신규 추가:**
- "계좌ㄱ", "송금ㄱ", "입금ㄱ", "리딩방ㄱ"
- "계ㄱ", "돈ㄱ", "급ㄱ"

**효과:**
- 젊은 층 사기범들이 사용하는 축약 표현 탐지

### 로맨스 스캠 단어 보강 (HIGH)
**신규 추가:**
- "군인이라서", "선물보내고싶어"
- "세관문제", "통관비용", "짐보관비", "호텔비"

**효과:**
- 국제 로맨스 스캠에서 자주 사용되는 핑계 탐지

### 투자 사기 단어 보강 (HIGH)
**신규 추가:**
- "프리미엄방", "텔레방", "오픈채팅방", "단톡방"
- "수익공유", "따라만하세요", "복사만하세요"
- "무조건수익", "원금2배"

**효과:**
- 텔레그램/카카오톡 기반 투자 사기방 탐지
- 과장 광고 표현 탐지

### 일반 거래/알바 표현 추가 (MEDIUM)
**신규 추가:**
- "재택", "부업", "투잡", "간단업무", "쉬운일"

**효과:**
- 알바 사기 초기 접근 패턴 탐지

---

## 4. LLM 트리거 키워드 보수화

### HybridScamDetector 수정

**변경 전:**
```kotlin
val hasMoneyKeyword = listOf("입금", "송금", "계좌", "선입금", "대출", "돈", "급전")
    .any { lowerText.contains(it) }
```

**변경 후:**
```kotlin
val hasMoneyKeyword = listOf("입금", "송금", "계좌", "선입금", "대출", "급전", "이체")
    .any { lowerText.contains(it) }
```

**제거된 단어:**
- **"돈"** - 너무 일반적이어서 오탐 유발

**추가된 단어:**
- **"이체"** - 명시적 금전 거래 표현

**효과:**
- LLM 호출 빈도 감소 (비용/성능 최적화)
- 명확한 금전 신호에만 LLM 활용

### 긴급성 키워드 추가
**변경 후:**
```kotlin
val hasUrgencyKeyword = listOf("긴급", "급하", "빨리", "지금당장", "지금바로", "오늘안에", "즉시")
    .any { lowerText.contains(it) }
```

**효과:**
- 긴급+금전 조합 시 LLM이 맥락 판단

---

## 5. 황금 패턴 보너스 완화

### HybridScamDetector 수정

**변경 전:**
```kotlin
if (hasUrgency && hasMoney && urlResult.urls.isNotEmpty()) {
    ruleConfidence += 0.08f
}
```

**변경 후:**
```kotlin
if (hasUrgency && hasMoney && urlResult.urls.isNotEmpty()) {
    ruleConfidence += 0.06f  // 8% → 6%
}
```

**효과:**
- 황금 패턴도 LLM 맥락 판단 여지 확보
- Rule-only 점수 과다 방지

---

## 예상 효과 시뮬레이션

### Case 1: 친구 대화 - 오탐 감소
**입력:** "돈 좀 빌려줄래? 급하게 필요해"

**변경 전:**
- "돈좀" (HIGH 0.4) + "빌려줄래" (일부 매칭) + "급하게필요" (CRITICAL 0.6)
- Rule confidence: ~1.0 → **강한 신호 → Rule-only 0.8+**

**변경 후:**
- "빌려줄래" (MEDIUM 0.25) + "급하게" (MEDIUM 0.25) + "돈" (미포함)
- 조합 보너스: 금전+긴급 +0.15
- Rule confidence: ~0.65 → **LLM 호출 → 맥락 판단**

### Case 2: 투자 사기 - 탐지율 향상
**입력:** "텔레방 들어오세요. 따라만 하시면 무조건 수익 나옵니다"

**변경 전:**
- 키워드 매칭 없음 또는 낮음
- Rule confidence: ~0.3

**변경 후:**
- "텔레방" (HIGH 0.4) + "따라만하세요" (HIGH 0.4) + "무조건수익" (HIGH 0.4)
- 조합 보너스: 투자+금전 +0.1
- Rule confidence: ~0.9 → **강한 신호 (사기계좌 DB 미등록 시에도 높은 점수)**

### Case 3: 축약형 사기 - 신규 탐지
**입력:** "계좌 ㄱ 빨리 ㄱ"

**변경 전:**
- "계좌" (HIGH 0.4) + "빨리" (일부 매칭)
- Rule confidence: ~0.5

**변경 후:**
- "계좌ㄱ" (MEDIUM 0.25) + "급ㄱ" (MEDIUM 0.25) + "계좌" (HIGH 0.4)
- Rule confidence: ~0.9 → **축약형도 탐지**

---

## 향후 튜닝 가이드

### 1. QA 데이터 수집 후
- False Positive (친구 대화를 사기로 오판) 로그 확인
- 자주 오탐되는 단어는 MEDIUM → 삭제 or 조합 전용으로

### 2. False Negative (사기를 놓침) 발생 시
- 놓친 사기 메시지의 공통 표현 추출
- MEDIUM으로 추가하고 조합 보너스 활용

### 3. 지역/세대별 표현 추가
- 20대: "ㄱㄱ", "ㅇㅋ", "ㅈㅅ" 등
- 40대+: 맞춤법 틀린 표현 ("입금해주세요" → "입금해쥬세요")

### 4. 언어별 확장
- 영어 스팸: "money transfer", "urgent payment"
- 중국어 스팸: 拼音(병음) 표기 탐지

---

## 적용 파일

1. **KeywordMatcher.kt**
   - 키워드 가중치 조정
   - 조합 보너스 로직 강화

2. **HybridScamDetector.kt**
   - LLM 트리거 키워드 보수화
   - 황금 패턴 보너스 완화
